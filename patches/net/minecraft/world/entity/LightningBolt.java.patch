--- a/net/minecraft/world/entity/LightningBolt.java
+++ b/net/minecraft/world/entity/LightningBolt.java
@@ -1,6 +_,7 @@
 package net.minecraft.world.entity;
 
 import com.google.common.collect.Sets;
+import com.mohistmc.youer.plugins.ban.bans.BanEvents;
 import java.util.List;
 import java.util.Optional;
 import java.util.Set;
@@ -25,6 +_,7 @@
 import net.minecraft.world.level.gameevent.GameEvent;
 import net.minecraft.world.phys.AABB;
 import net.minecraft.world.phys.Vec3;
+import org.bukkit.craftbukkit.event.CraftEventFactory;
 
 public class LightningBolt extends Entity {
     private static final int START_LIFE = 2;
@@ -38,6 +_,7 @@
     private ServerPlayer cause;
     private final Set<Entity> hitEntities = Sets.newHashSet();
     private int blocksSetOnFire;
+    private float damage = 5.0F;
 
     public LightningBolt(EntityType<? extends LightningBolt> p_20865_, Level p_20866_) {
         super(p_20865_, p_20866_);
@@ -68,11 +_,20 @@
     private void powerLightningRod() {
         BlockPos blockpos = this.getStrikePosition();
         BlockState blockstate = this.level().getBlockState(blockpos);
-        if (blockstate.is(Blocks.LIGHTNING_ROD)) {
+        // Neo: support custom LightningRodBlocks
+        if (blockstate.getBlock() instanceof LightningRodBlock) {
             ((LightningRodBlock)blockstate.getBlock()).onLightningStrike(blockstate, this.level(), blockpos);
         }
     }
 
+    public void setDamage(float damage) {
+        this.damage = damage;
+    }
+
+    public float getDamage() {
+        return this.damage;
+    }
+
     @Override
     public void tick() {
         super.tick();
@@ -130,7 +_,7 @@
                     }
                 }
 
-                this.discard();
+                this.discard(org.bukkit.event.entity.EntityRemoveEvent.Cause.DESPAWN); // CraftBukkit - add Bukkit remove cause
             } else if (this.life < -this.random.nextInt(10)) {
                 this.flashes--;
                 this.life = 1;
@@ -139,7 +_,7 @@
             }
         }
 
-        if (this.life >= 0) {
+        if (this.life >= 0 && !this.visualOnly) { // CraftBukkit - add !this.visualOnly
             if (!(this.level() instanceof ServerLevel)) {
                 this.level().setSkyFlashTime(2);
             } else if (!this.visualOnly) {
@@ -151,6 +_,7 @@
                     );
 
                 for (Entity entity : list1) {
+                    if (!net.neoforged.neoforge.event.EventHooks.onEntityStruckByLightning(entity, this))
                     entity.thunderHit((ServerLevel)this.level(), this);
                 }
 
@@ -168,20 +_,29 @@
     }
 
     private void spawnFire(int p_20871_) {
+        if (BanEvents.banFireTick()) return;
         if (!this.visualOnly && !this.level().isClientSide && this.level().getGameRules().getBoolean(GameRules.RULE_DOFIRETICK)) {
             BlockPos blockpos = this.blockPosition();
             BlockState blockstate = BaseFireBlock.getState(this.level(), blockpos);
             if (this.level().getBlockState(blockpos).isAir() && blockstate.canSurvive(this.level(), blockpos)) {
-                this.level().setBlockAndUpdate(blockpos, blockstate);
-                this.blocksSetOnFire++;
+                // CraftBukkit start - add "!visualOnly"
+                if (!visualOnly && !CraftEventFactory.callBlockIgniteEvent(this.level(), blockpos, this).isCancelled()) {
+                    this.level().setBlockAndUpdate(blockpos, blockstate);
+                    ++this.blocksSetOnFire;
+                }
+                // CraftBukkit end
             }
 
             for (int i = 0; i < p_20871_; i++) {
                 BlockPos blockpos1 = blockpos.offset(this.random.nextInt(3) - 1, this.random.nextInt(3) - 1, this.random.nextInt(3) - 1);
                 blockstate = BaseFireBlock.getState(this.level(), blockpos1);
                 if (this.level().getBlockState(blockpos1).isAir() && blockstate.canSurvive(this.level(), blockpos1)) {
-                    this.level().setBlockAndUpdate(blockpos1, blockstate);
-                    this.blocksSetOnFire++;
+                    // CraftBukkit start - add "!visualOnly"
+                    if (!visualOnly && !CraftEventFactory.callBlockIgniteEvent(this.level(), blockpos1, this).isCancelled()) {
+                        this.level().setBlockAndUpdate(blockpos1, blockstate);
+                        ++this.blocksSetOnFire;
+                    }
+                    // CraftBukkit end
                 }
             }
         }
@@ -191,7 +_,8 @@
         BlockState blockstate = p_147151_.getBlockState(p_147152_);
         BlockPos blockpos;
         BlockState blockstate1;
-        if (blockstate.is(Blocks.LIGHTNING_ROD)) {
+        // Neo: support custom LightningRodBlocks
+        if (blockstate.getBlock() instanceof LightningRodBlock) {
             blockpos = p_147152_.relative(blockstate.getValue(LightningRodBlock.FACING).getOpposite());
             blockstate1 = p_147151_.getBlockState(blockpos);
         } else {
