--- a/net/minecraft/world/level/gameevent/vibrations/VibrationSystem.java
+++ b/net/minecraft/world/level/gameevent/vibrations/VibrationSystem.java
@@ -2,7 +_,6 @@
 
 import com.mojang.serialization.Codec;
 import com.mojang.serialization.codecs.RecordCodecBuilder;
-import com.mojang.serialization.codecs.RecordCodecBuilder.Instance;
 import it.unimi.dsi.fastutil.objects.Reference2IntOpenHashMap;
 import java.util.List;
 import java.util.Optional;
@@ -26,12 +_,14 @@
 import net.minecraft.world.level.ChunkPos;
 import net.minecraft.world.level.ClipBlockStateContext;
 import net.minecraft.world.level.Level;
-import net.minecraft.world.level.block.state.BlockState;
 import net.minecraft.world.level.gameevent.GameEvent;
 import net.minecraft.world.level.gameevent.GameEventListener;
 import net.minecraft.world.level.gameevent.PositionSource;
 import net.minecraft.world.phys.HitResult;
 import net.minecraft.world.phys.Vec3;
+import org.bukkit.craftbukkit.CraftGameEvent;
+import org.bukkit.craftbukkit.block.CraftBlock;
+import org.bukkit.event.block.BlockReceiveGameEvent;
 
 public interface VibrationSystem {
     List<ResourceKey<GameEvent>> RESONANCE_EVENTS = List.of(
@@ -52,6 +_,8 @@
         GameEvent.RESONATE_15.key()
     );
     int DEFAULT_VIBRATION_FREQUENCY = 0;
+    /** @deprecated Neo: use the {@link net.neoforged.neoforge.registries.datamaps.builtin.NeoForgeDataMaps#VIBRATION_FREQUENCIES data map} instead. */
+    @Deprecated
     ToIntFunction<ResourceKey<GameEvent>> VIBRATION_FREQUENCY_FOR_EVENT = Util.make(new Reference2IntOpenHashMap<>(), p_316653_ -> {
         p_316653_.defaultReturnValue(0);
         p_316653_.put(GameEvent.STEP.key(), 1);
@@ -105,11 +_,13 @@
     VibrationSystem.User getVibrationUser();
 
     static int getGameEventFrequency(Holder<GameEvent> p_316300_) {
-        return p_316300_.unwrapKey().map(VibrationSystem::getGameEventFrequency).orElse(0);
+        var data = p_316300_.getData(net.neoforged.neoforge.registries.datamaps.builtin.NeoForgeDataMaps.VIBRATION_FREQUENCIES);
+        return data != null ? data.frequency() : 0;
     }
 
     static int getGameEventFrequency(ResourceKey<GameEvent> p_316800_) {
-        return VIBRATION_FREQUENCY_FOR_EVENT.applyAsInt(p_316800_);
+        var holder = net.minecraft.core.registries.BuiltInRegistries.GAME_EVENT.getHolder(p_316800_);
+        return holder.map(VibrationSystem::getGameEventFrequency).orElse(0);
     }
 
     static ResourceKey<GameEvent> getResonanceEventByFrequency(int p_282105_) {
@@ -125,7 +_,7 @@
         public static Codec<VibrationSystem.Data> CODEC = RecordCodecBuilder.create(
             p_338090_ -> p_338090_.group(
                         VibrationInfo.CODEC.lenientOptionalFieldOf("event").forGetter(p_281665_ -> Optional.ofNullable(p_281665_.currentVibration)),
-                        VibrationSelector.CODEC.fieldOf("selector").forGetter(VibrationSystem.Data::getSelectionStrategy),
+                        VibrationSelector.CODEC.optionalFieldOf("selector").xmap(o -> o.orElseGet(VibrationSelector::new), Optional::of).forGetter(VibrationSystem.Data::getSelectionStrategy),
                         ExtraCodecs.NON_NEGATIVE_INT.fieldOf("event_delay").orElse(0).forGetter(VibrationSystem.Data::getTravelTimeInTicks)
                     )
                     .apply(p_338090_, (p_281934_, p_282381_, p_282931_) -> new VibrationSystem.Data(p_281934_.orElse(null), p_282381_, p_282931_, true))
@@ -213,7 +_,14 @@
                     return false;
                 } else {
                     Vec3 vec3 = optional.get();
-                    if (!vibrationsystem$user.canReceiveVibration(p_282254_, BlockPos.containing(p_282426_), p_316513_, p_283664_)) {
+                    // CraftBukkit start
+                    boolean defaultCancel = !vibrationsystem$user.canReceiveVibration(p_282254_, BlockPos.containing(p_282426_), p_316513_, p_283664_);
+                    Entity entity = p_283664_.sourceEntity();
+                    BlockReceiveGameEvent event = new BlockReceiveGameEvent(CraftGameEvent.minecraftToBukkit(p_316513_.value()), CraftBlock.at(p_282254_, BlockPos.containing(vec3)), (entity == null) ? null : entity.getBukkitEntity());
+                    event.setCancelled(defaultCancel);
+                    p_282254_.getCraftServer().getPluginManager().callEvent(event);
+                    if (event.isCancelled()) {
+                        // CraftBukkit end
                         return false;
                     } else if (isOccluded(p_282254_, p_282426_, vec3)) {
                         return false;
